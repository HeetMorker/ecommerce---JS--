<!DOCTYPE html>
<html lang="en">

<head>
	<title>Login</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="asset/Css/all.min.css">
	<link rel="stylesheet" href="asset/Css/bootstrap.min.css">
	<link rel="stylesheet" href="asset/Css/bootstrap-icons.min.css">
	<link rel="stylesheet" href="asset/Font Family/stylesheet.css">
	<link rel="stylesheet" href="asset/Css/login/util.css">
	<link rel="stylesheet" href="asset/Css/login/main.css">
</head>

<body>

	<div class="limiter">
		<div class="container-login100">
			<div class="wrap-login100 align-items-center">
				<div class="login100-pic js-tilt box tilt" data-tilt>
					<img src="asset/Images/img-01.png" alt="IMG">
					<div class="timebox"></div>
				</div>
				<form class="login100-form validate-form " id="formValidation" onsubmit=" return validate()">
					<span class="login100-form-title">Sign Up</span>
					<div class="wrap-input100 validate-input">
						<input class="input100" type="email" name="email" placeholder="Email" id="email" required>
						<span class="focus-input100"></span>
						<span class="symbol-input100"><i class="bi bi-envelope-fill" aria-hidden="true"></i></span>
					</div>
					<div class="wrap-input100 validate-input">
						<input class="input100" type="password" name="pass" placeholder="Password" id="pass" required>
						<span class="focus-input100"></span>
						<span class="symbol-input100"><i class="bi bi-person-fill-lock" aria-hidden="true"></i></span>
					</div>
					<div class="wrap-input100 validate-input">
						<input class="input100" type="password" name="pass" placeholder="confirmPassword"
							id="confirmPassword" required>
						<span class="focus-input100"></span>
						<span class="symbol-input100"><i class="bi bi-person-fill-lock" aria-hidden="true"></i></span>
					</div>
					<div class="container-login100-form-btn">
						<button class="login100-form-btn" type="submit">Sign Up</button>
					</div>
					<div class="text-center p-t-36">
						<a class="txt2" href="login.html">Sign In
							<i class="bi bi-arrow-right m-l-5" aria-hidden="true"></i>
						</a>
					</div>
				</form>
			</div>
		</div>
	</div>
	<!-- MODAL -->
	<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered">
		  <div class="modal-content">
			<div class="modal-header">
			  <h1 class="modal-title fs-5" id="exampleModalLabel">LOGIN ERROR</h1>
			  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
			  <p>Email Id is already Used !!</p>
			</div>
			<div class="modal-footer">
			  <button type="button" class="btn text-light" style="background-color: #57b846;" data-bs-dismiss="modal">Close</button>
			</div>
		  </div>
		</div>
	  </div>
	
	<script src="asset/JavaScript/jquery-3.7.0.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
	<script src="asset/JavaScript/bootstrap.bundle.min.js"></script>
	<script src="asset/JavaScript/own.jquery.js"></script>
	<script src="asset/JavaScript/login.js"></script>
	<script>
  		var student = JSON.parse(localStorage.getItem('user')) || [];
		function validate() {
			event.preventDefault();
			let email = document.getElementById("email").value;
			let pass = document.getElementById("pass").value;
			let confirmPassword = document.getElementById("confirmPassword").value;

			if(student.some(students => students.email === email)){
				$('.modal').modal('show');
				document.getElementById("formValidation").reset();
				document.getElementById("email").focus();
				return;
			}
			else if (pass !== confirmPassword) {
				$('#confirmPassword').popover({
					content: 'Passwords do not match!',
					placement: 'left',
					trigger: 'focus',
					color: '#3bb77e',
					delay: { "show": 500, "hide": 100 }
				}).popover('show');
				document.getElementById("confirmPassword").focus();
			}
			else {
				var e = document.getElementById("email").value;
				var p = document.getElementById("pass").value;
				var data = {
					email: e,
					passwd: p
				}
				student.push(data);
				localStorage.setItem('user', JSON.stringify(student))
				window.location = "login.html";
			}
		}
	</script>

</body>

</html>